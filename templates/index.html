<!DOCTYPE html>
<html>
<head>
    <title>Predict Vehicle Price</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container d-flex justify-content-center align-items-center min-vh-100">
        <div class="card shadow-lg p-4 rounded-4" style="max-width: 550px; width: 100%; background-color: #fdf6f0;">
            <h2 class="text-center mb-4" style="color: #ff6f91; font-weight: bold;">âœ¨ Cute Car Price Predictor âœ¨</h2>
            <form method="POST" action="/predict">
                <div class="mb-3">
                    <label for="make" class="form-label" style="color: #444;">Make</label>
                    <select id="make" name="make" class="form-select rounded-pill">
                        {% for make in makes %}
                        <option value="{{ make }}">{{ make }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="mb-3">
                    <label for="model" class="form-label" style="color: #444;">Model</label>
                    <select id="model" name="model" class="form-select rounded-pill"></select>
                </div>

                <div class="mb-3">
                    <label for="trim" class="form-label" style="color: #444;">Trim</label>
                    <select id="trim" name="trim" class="form-select rounded-pill"></select>
                </div>

                <div class="mb-3">
                    <label for="mileage" class="form-label" style="color: #444;">Mileage</label>
                    <input type="number" name="mileage" class="form-control rounded-pill" required>
                </div>

                <div class="mb-3">
                    <label for="vehicle_age" class="form-label" style="color: #444;">Vehicle Age</label>
                    <input type="number" name="vehicle_age" class="form-control rounded-pill" required>
                </div>

                <div class="d-grid mt-4">
                    <button type="submit" class="btn btn-lg rounded-pill" style="background-color: #ff9aa2; color: white;">ðŸ’– Predict Price ðŸ’–</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        const modelsByMake = {{ models_by_make | tojson | safe }};
        const trimsByModel = {{ trims_by_model | tojson | safe }};

        function updateModelDropdown() {
            const make = $('#make').val();
            const models = modelsByMake[make] || [];
            $('#model').html(models.map(m => `<option value="${m}">${m}</option>`));
            updateTrimDropdown();
        }

        function updateTrimDropdown() {
            const model = $('#model').val();
            const trims = trimsByModel[model] || [];
            $('#trim').html(trims.map(t => `<option value="${t}">${t}</option>`));
        }

        $('#make').on('change', updateModelDropdown);
        $('#model').on('change', updateTrimDropdown);
        $(document).ready(updateModelDropdown);
    </script>
</body>
</html>
